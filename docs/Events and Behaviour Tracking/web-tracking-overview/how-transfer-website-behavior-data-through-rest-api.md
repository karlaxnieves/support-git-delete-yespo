---
title: Transferring Website Behavior Data via REST API
excerpt: ''
deprecated: false
hidden: false
metadata:
  title: Transferring Website Behavior Data via REST API | Yespo Guide
  description: >-
    Learn how to transfer website behavioral data to the platform using REST API
    and use it to create personalized product recommendations.
  robots: index
next:
  description: ''
---
Send the user behavior data and use it to [create personalized product recommendations](https://docs.yespo.io/docs/product-recommendations-website) for the site and for your emails.

You can send events through one of the methods:

- [Using eS.JS](https://docs.yespo.io/docs/how-set-web-tracking-sending-events-java-scipt-request);
- Using REST API.

> üìò Important
> 
> When setting up tracking via the REST API, the recommendations functionality on the site will not be available, in this case, you need to use the option of [calling eS.JS functions](https://docs.yespo.io/docs/how-set-web-tracking-sending-events-java-scipt-request)

In this article, we will explain how to use the second method.

**Request headers**

> üìò 
> 
> POST / HTTP/1.1
> 
> Host: `https://tracker.yespo.io/api/v2`
> 
> Content-type: application/json

Response status code is 200: No authorization is required.

## ProductPage

### Description

To display correct recommended products or product categories or send triggers for abandoned browses, send a request with data on:

- Product card the user is currently viewing;
- Product price and availability.

### Example

```json
{
  "GeneralInfo": {
    "eventName": "ProductPage",
    "siteId": "8A412DC",
    "datetime":1579622183208,
¬†¬†¬†¬†"externalCustomerId": "1234509876",
    "user_phone": "1-541-754-3010",
    "user_email": "user@mail.com",
    "user_name": "Gregori Boczynski",
    "user_es_contact_id": "255830499",
    "cookies": {
      "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
    }
  },
  "ProductPage": {
    "Product": {
      "productKey": "72354",
      "price": "754 USD",
      "isInStock": "1",
      "tag_something": [
        "abc",
        "bca"
      ]
    },
    "Tags": {
      "some_tags": [
        "some_tag1",
        "some_tag2"
      ]
    }
  }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \nType: object",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúProductPage‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "‚Ä¢ To get your site ID, please contact our support team.  \n‚Ä¢ Static parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_email",
    "5-1": "\"`user@mail.com`\"  \nOptional  \nType: string",
    "5-2": "User email",
    "6-0": "user_name",
    "6-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "6-2": "User name and surname",
    "7-0": "user_es_contact_id",
    "7-1": "\"255830499\"  \nOptional  \ntype: string",
    "7-2": "User ID in the Yespo",
    "8-0": "cookies",
    "8-1": "\"CDA68358-94FB-4D83-9655-3FEB3C4114A3\"  \nRequired  \nType: object, string",
    "8-2": "Cookie sc is a cookie generated by our script if it is installed on your site. Each cookie must be unique for each user. You can create your own cookies. Example of calling this cookie from javascript document.cookie, the cookie we need is named ‚Äúsc‚Äù",
    "9-0": "datetime",
    "9-1": "1579622183208",
    "9-2": "Timestamp (millisecond)",
    "10-0": "ProductPage",
    "10-1": "Required  \nType: object",
    "10-2": "Event description",
    "11-0": "productKey",
    "11-1": "‚Äú72354‚Äù  \nRequired  \nType: string",
    "11-2": "‚Ä¢ Product ID.  \n‚Ä¢ Should match the productKey on pagesStatusCart and PurchasedItems.",
    "12-0": "price",
    "12-1": "‚Äú754 USD‚Äù  \nRequired  \nType: string",
    "12-2": "The price per item can be sent with the currency value.  \n  \nIf the price has changed on the site but hasn‚Äôt changed in the feed, the sent value will be the value from the site.",
    "13-0": "isinStock",
    "13-1": "‚Äú1‚Äù  \nOptional  \nType: int",
    "13-2": "‚Ä¢ Indicates if items are in stock.  \n‚Ä¢ Can have two values:  \n\"0\" ‚Äì items are out of stock;  \n\"1\" ‚Äì items are in stock.  \n‚Ä¢ If the availability has changed on the site but hasn‚Äôt changed in the feed, the sent value will be the value from the site.",
    "14-0": "tag\\_[something]",
    "14-1": "[\"abc\",\"bca\"]  \nOptional  \nType: array of strings",
    "14-2": "‚Ä¢ All additional fields can be transferred in this parameter. The prefix tag\\_ is required. After it, you can enter any name.  \n‚Ä¢ There can be several such parameters.  \n‚Ä¢ The value of this parameter is transferred as a data array which can be entered separated by commas.",
    "15-0": "Tags",
    "15-1": "Optional  \nType: object",
    "15-2": "Additional fields"
  },
  "cols": 3,
  "rows": 16,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## StatusCart

### Description

An event is sent after the cart status (with a new GUID) is changed, for example, after clicking a Buy button on the category page. The cart status should be updated from all pages. If the cart is empty, then you need to send an empty cart event (empty array without products).

### Example

```json
{
  "GeneralInfo": {
    "eventName": "StatusCart",
    "siteId": "8A412DC",
    "datetime":1579622183208,
¬†¬†¬†¬†"externalCustomerId": "1234509876",
    "user_phone": "1-541-754-3010",
    "user_email": "user@mail.com",
    "user_name": "Gregori Boczynski",
    "user_es_contact_id": "255830499",
    "cookies": {
      "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
    }
  },
  "StatusCart": {
    "GUID": "6F9619FF-8B86-D011-B42D-00CF4FC964FF",
    "Products": [
      {
        "productKey": "430738",
        "price": 201.95,
        "discount": 180,
        "quantity": 1,
        "price_currency_code": "USD",
        "tag_something": [
          "aaa",
          "bbb"
        ]
      },
      {
        "productKey": "902339",
        "price": 596,
        "discount": 590,
        "quantity": 1,
        "price_currency_code": "USD",
        "tag_something": [
          "aaa",
          "bbb"
        ]
      }
    ],
    "Tags": {
      "some_tags": [
        "1",
        "a2"
      ],
      "some_tags1": [
        "4",
        "gg"
      ]
    }
  }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \nType: object, string",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúStatusCart‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "‚Ä¢ To get your site ID, please contact our support.  \n‚Ä¢ Static parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_email",
    "5-1": "\"`user@mail.com`\"  \nOptional  \nType: string",
    "5-2": "User email",
    "6-0": "user_name",
    "6-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "6-2": "User name and surname",
    "7-0": "user_es_contact_id",
    "7-1": "\"255830499\"  \nOptional  \nType: string",
    "7-2": "User ID in the platform",
    "8-0": "datetime",
    "8-1": "1579622183208",
    "8-2": "Timestamp (millisecond)",
    "9-0": "GUID",
    "9-1": "‚Äú6F9619FF-8B86-D011-B42D-00CF4FC964FF‚Äù  \nRequired  \nType: string",
    "9-2": "‚Ä¢ Displays the current composition of the shopping cart  \n‚Ä¢ Can be generated from random numbers and Latin letters",
    "10-0": "StatusCart",
    "10-1": "Required  \nType: object, string",
    "10-2": "‚Ä¢ Event description.  \n‚Ä¢ Transferred as an array of strings with products added to the cart.",
    "11-0": "productKey",
    "11-1": "‚Äú430738‚Äù  \nRequired  \nType: string",
    "11-2": "‚Ä¢ Product ID.  \n‚Ä¢ Should match the productKey on the ProductPage page.",
    "12-0": "price",
    "12-1": "‚Äú201.95‚Äù  \nRequired  \nType: string",
    "12-2": "Price per item",
    "13-0": "discount",
    "13-1": "‚Äú180‚Äù  \nOptional  \nType: string",
    "13-2": "Discount per item",
    "14-0": "quantity",
    "14-1": "‚Äú1‚Äù  \nRequired  \nType: Int",
    "14-2": "Quantity of items",
    "15-0": "price_currency_code",
    "15-1": "‚ÄúUSD‚Äù  \nOptional  \nType: string",
    "15-2": "Currency",
    "16-0": "tag\\_[something]",
    "16-1": "[\"abc\",\"bca\"]  \nOptional  \nType: array of strings",
    "16-2": "‚Ä¢ All additional fields can be transferred in this parameter. The prefix tag\\_ is required. After it, you can enter any name.  \n‚Ä¢ There can be several such parameters,  \n‚Ä¢ The value of this parameter is transferred as a data array which can be entered separated by commas.",
    "17-0": "Tags",
    "17-1": "Optional  \nType: object",
    "17-2": "Additional fields"
  },
  "cols": 3,
  "rows": 18,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## Wishlist

### Description

Sending the AddToWishlist event - at the time of adding a product to the wish list (favorites).

Necessary for calculating and displaying recommendations and sending triggers related to the wish list.

### Example

```json
{
  "GeneralInfo": {
    "eventName": "AddToWishlist",
    "siteId": "8A412DC",
    "datetime":1579622183208,
    "externalCustomerId": "1234509876",
    "user_phone": "1-541-754-3010",
    "user_email": "user@mail.com",
    "user_name": "Gregori Boczynski",
    "user_es_contact_id": "255830499",
    "cookies": {
      "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
    }
  },
  "AddToWishlist": {
    "Product": {
      "productKey": "72354",
      "price": "754",
      "isInStock": "1",
      "tag_something": [
        "abc",
        "bca"
      ]
    },
    "Tags": {
      "some_tags": [
        "some_tag1",
        "some_tag2"
      ]
    }
  }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \n  \nType: object",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúAddToWishlist‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "‚Ä¢ To get your site ID, please contact our support team.  \n‚Ä¢ Static parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \n  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_email",
    "5-1": "\"`user@mail.com`\"  \nOptional  \nType: string",
    "5-2": "User email",
    "6-0": "user_name",
    "6-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "6-2": "User name and surname",
    "7-0": "user_es_contact_id",
    "7-1": "\"255830499\"  \nOptional  \ntype: string",
    "7-2": "User ID in the Yespo",
    "8-0": "cookies",
    "8-1": "\"CDA68358-94FB-4D83-9655-3FEB3C4114A3\"  \nRequired  \nType: object, string",
    "8-2": "Cookie sc is a cookie generated by our script. You can get on the site.  \nThe required cookie is titled \"sc.\"",
    "9-0": "datetime",
    "9-1": "1579622183208",
    "9-2": "Timestamp (millisecond)",
    "10-0": "AddToWishlist",
    "10-1": "Required  \nType: object",
    "10-2": "Event description",
    "11-0": "productKey",
    "11-1": "‚Äú72354‚Äù  \nRequired  \nType: string",
    "11-2": "‚Ä¢ Product ID.  \n‚Ä¢ Should match the productKey on the product page.",
    "12-0": "price",
    "12-1": "‚Äú754 USD‚Äù  \nRequired  \nType: string",
    "12-2": "The price per item.",
    "13-0": "tag\\_[something]",
    "13-1": "[\"abc\",\"bca\"]  \nOptional  \nType: array of strings",
    "13-2": "‚Ä¢ All additional fields can be transferred in this parameter. The prefix tag\\_ is required. After it, you can enter any name.  \n‚Ä¢ There can be several such parameters.  \n‚Ä¢  The value of this parameter is transferred as a data array which can be entered separated by commas.",
    "14-0": "Tags",
    "14-1": "Optional  \nType: object",
    "14-2": "Additional fields"
  },
  "cols": 3,
  "rows": 15,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## PurchasedItems

### Description

To display recommendations on the order confirmation page or to send triggers for abandoned carts, you need to send a request that will indicate which product the user purchased.

### Example

```
{
  "GeneralInfo": {
    "eventName": "PurchasedItems",
    "siteId": "8A412DC",
    "datetime":1579622183208,
¬†¬†¬†¬†"externalCustomerId": "1234509876",
    "user_phone": "1-541-754-3010",
    "user_email": "user@mail.com",
    "user_name": "Gregori Boczynski",
    "user_es_contact_id": "255830499",
    "cookies": {
      "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
    }
  },
  "PurchasedItems": {
    "Products": [
      {
        "product_id": "430738",
        "unit_price": "201.95",
        "quantity": 1
      },
      {
        "product_id": "211452",
        "unit_price": "341.80",
        "quantity": 2
      }
    ],
    "OrderNumber": "123/2017",
    "Tags": {
      "some_tags1": [
        "4",
        "gg"
      ]
    }
  }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \nType: object, string",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúStatusCart‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "‚Ä¢ To get your site ID, please contact our support.  \n‚Ä¢ Static parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_email",
    "5-1": "\"`user@mail.com`\"  \nOptional  \nType: string",
    "5-2": "User email",
    "6-0": "user_name",
    "6-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "6-2": "User name and surname",
    "7-0": "user_es_contact_id",
    "7-1": "\"255830499\"  \nOptional  \nType: string",
    "7-2": "User ID in the Yespo",
    "8-0": "datetime",
    "8-1": "1579622183208",
    "8-2": "Timestamp (millisecond)",
    "9-0": "cookies",
    "9-1": "\"CDA68358-94FB-4D83-9655-3FEB3C4114A3\"  \nRequired  \nType: object, string",
    "9-2": "Cookie sc is a cookie generated by our script if it is installed on your site. Each cookie must be unique for each user. You can create your own cookies. Example of calling this cookie from javascript document.cookie, the cookie we need is named ‚Äúsc‚Äù",
    "10-0": "OrderNumber",
    "10-1": "‚Äú123/2017‚Äù  \nRequired  \nType: string",
    "10-2": "‚Ä¢ Order number.  \n‚Ä¢ Confirms purchase completion.",
    "11-0": "PurchasedItems",
    "11-1": "Type: array of strings",
    "11-2": "List of items",
    "12-0": "product_id",
    "12-1": "‚Äú430738‚Äù  \nRequired  \nType: string",
    "12-2": "Product ID.  \nShould match productKey on the ProductPage page.",
    "13-0": "unit_price",
    "13-1": "‚Äú201.95‚Äù  \nRequired  \nType: string",
    "13-2": "Price per item",
    "14-0": "quantity",
    "14-1": "‚Äú1‚Äù  \nRequired  \nType: Integer",
    "14-2": "Quantity of items",
    "15-0": "Tags",
    "15-1": "Optional  \nType: object",
    "15-2": " Additional fields"
  },
  "cols": 3,
  "rows": 16,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## ProductImpressions

### Description

The event that transfers data on the block display. It‚Äôs sent by default through JS API. You don‚Äôt need to send it additionally.¬†If the script is not installed, transfer according to the format.

### Example

```json
{
  "GeneralInfo": {
    "eventName": "ProductImpressions",
    "siteId": "8A412DC",
    "datetime":1579622183208,
¬†¬†¬†¬†"externalCustomerId": "1234509876",
    "user_phone": "1-541-754-3010",
    "user_email": "user@mail.com",
    "user_name": "Gregori Boczynski",
    "user_es_contact_id": "255830499",
    "cookies": {
      "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
    }
  },
  "ProductImpression": {
    "Products": [
      {
        "product_id": "430968",
        "container_type": "1253"
      },
      {
        "product_id": "430738",
        "container_type": "1254"
      },
      {
        "product_id": "429983",
        "container_type": "1255"
      }
    ],
    "Tags": {
      "some_tags": [
        "1",
        "a2"
      ],
      "some_tags1": [
        "4",
        "gg"
      ]
    }
  }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \nType: object",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúProductImpressions‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "‚Ä¢ To get your site ID, please contact our support.  \n‚Ä¢ Static parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_name",
    "5-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "5-2": "User name and surname",
    "6-0": "user_es_contact_id",
    "6-1": "\"255830499\"  \nOptional  \nType: string",
    "6-2": "User ID in our platform",
    "7-0": "datetime",
    "7-1": "1579622183208",
    "7-2": "Timestamp (millisecond)",
    "8-0": "cookies",
    "8-1": "\"CDA68358-94FB-4D83-9655-3FEB3C4114A3\"  \nRequired  \nType: object, string",
    "8-2": "Cookie sc is a cookie generated by our script if it is installed on your site. Each cookie must be unique for each user. You can create your own cookies. Example of calling this cookie from javascript document.cookie, the cookie we need is named ‚Äúsc‚Äù",
    "9-0": "ProductImpressions",
    "9-1": "Required  \nType: array of objects",
    "9-2": "‚Ä¢ Description of impressions  \n‚Ä¢ Transferred as an array of objects.",
    "10-0": "product_id",
    "10-1": "‚Äú430738‚Äù  \nRequired  \nType: string",
    "10-2": "ID of the product or category that is in the feed",
    "11-0": "container_type",
    "11-1": "‚Äú1253‚Äù  \nRequired  \nType: string",
    "11-2": "Recommendation block number. You can get the container_type in response to a request for recommendations",
    "12-0": "Tags",
    "12-1": "Optional  \nType: object",
    "12-2": "Additional fields"
  },
  "cols": 3,
  "rows": 13,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## CategoryPage

### Description

Can be used to send data on:

- Triggers;
- Category browses without product card viewing;
- Site browses without category or product card viewing.

You need to send a request with the data on the category the user is currently browsing.

### Example

```json
{
  "GeneralInfo": {
    "eventName": "CategoryPage",
    "siteId": "8A412DC",
    "datetime":1579622183208,
¬†¬†¬†¬†"externalCustomerId": "1234509876",
    "user_phone": "1-541-754-3010",
    "user_email": "user@mail.com",
    "user_name": "Gregori Boczynski",
    "user_es_contact_id": "255830499",
    "cookies": {
      "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
    }
  },
  "CategoryPage": {
    "Category": {
      "categoryKey": "509876"
    },
    "Tags": {
      "some_tags": [
        "1",
        "a2"
      ],
      "some_tags1": [
        "4",
        "gg"
      ]
    }
  }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \nType: object",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúProductPage‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "‚Ä¢ To get your site ID, please contact support.  \n‚Ä¢ Static parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \n  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_email",
    "5-1": "\"`user@mail.com`\"  \nOptional  \nType: string",
    "5-2": "User email",
    "6-0": "user_name",
    "6-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "6-2": "User‚Äôs name and surname",
    "7-0": "user_es_contact_id",
    "7-1": "\"255830499\"  \nOptional  \nType: string",
    "7-2": "User ID in the Yespo",
    "8-0": "datetime",
    "8-1": "1579622183208",
    "8-2": "Timestamp (millisecond)",
    "9-0": "cookies",
    "9-1": "\"CDA68358-94FB-4D83-9655-3FEB3C4114A3\"  \nRequired  \nType: object, string",
    "9-2": "Cookie sc is a cookie generated by our script if it is installed on your site. Each cookie must be unique for each user. You can create your own cookies. Example of calling this cookie from javascript document.cookie, the cookie we need is named ‚Äúsc‚Äù",
    "10-0": "CategoryPage",
    "10-1": "Required  \nType: object",
    "10-2": "Event description",
    "11-0": "categoryKey",
    "11-1": "‚ÄúBabies‚Äù  \nRequired  \nType: string",
    "11-2": "ID of the product or category according to a product feed",
    "12-0": "Tags",
    "12-1": "Optional  \nType: object",
    "12-2": "Additional fields"
  },
  "cols": 3,
  "rows": 13,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## CustomerData

### Description

To send triggers for abandoned browses or abandoned carts, you need to send a request with the data on the user.

Email should be sent at least in the personal account, on the page "Thank you for the order" and during registration.

### Example

```json
{
 "GeneralInfo": {
   "eventName": "CustomerData",
   "siteId": "8D3869C",
   "datetime":1579622183208,
¬†¬†¬†"externalCustomerId": "1234509876",
   "user_phone": "3801111111111",
   "user_email": "user@mail.com",
   "user_es_contact_id": "255830499",
   "user_name": "Johny",
   "cookies": {
     "sc": "CDA68358-94FB-4D83-9655-3FEB3CGGG1"
   }
 }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "GeneralInfo",
    "0-1": "Required  \nType: array of objects",
    "0-2": "General information",
    "1-0": "eventName",
    "1-1": "‚ÄúStatusCart‚Äù  \nRequired  \nType: string",
    "1-2": "Event name",
    "2-0": "siteId",
    "2-1": "‚Äú8A412DC‚Äù  \nRequired  \nType: string",
    "2-2": "To get your site ID, please contact support.  \nStatic parameter.",
    "3-0": "externalCustomerId",
    "3-1": "\"1234509876\"  \nOptional  \nType: string",
    "3-2": "External identifier generated in your system",
    "4-0": "user_phone",
    "4-1": "\"1-541-754-3010\"  \nOptional  \n  \nType: string",
    "4-2": "Phone number in the international format",
    "5-0": "user_email",
    "5-1": "\"`user@mail.com`\"  \nOptional  \nType: string",
    "5-2": "User email",
    "6-0": "user_name",
    "6-1": "\"Gregori Boczynski\"  \nOptional  \nType: string",
    "6-2": "User name and surname",
    "7-0": "user_es_contact_id",
    "7-1": "\"255830499\"  \nOptional  \nType: string",
    "7-2": "User ID in the platform",
    "8-0": "datetime",
    "8-1": "1579622183208",
    "8-2": "Timestamp (millisecond)",
    "9-0": "cookies",
    "9-1": "\"CDA68358-94FB-4D83-9655-3FEB3C4114A3\"  \nRequired  \nType: object, string",
    "9-2": "Cookie sc is a cookie generated by our script if it is installed on your site. Each cookie must be unique for each user. You can create your own cookies. Example of calling this cookie from javascript document.cookie, the cookie we need is named ‚Äúsc‚Äù"
  },
  "cols": 3,
  "rows": 10,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## SearchRequest

### Description

To collect statistics on search queries, you need to send the value from the search line.

Use this event for triggers. Send it only if the search returned no results. In the trigger, such contacts will receive personal recommendations (at the moment, recommendations don‚Äôt depend on the value entered in the search, we will support this feature in the nearest future).

### Example

```json
{
    "GeneralInfo": {
        "eventName": "SearchRequest",
        "siteId": "CE460EC",
        "datetime": 1668792552000,
        "externalCustomerId": "1234509876",
        "user_phone": "1-541-754-3010",
        "user_email": "userdech123@mail.com",
        "user_name": "Gregori Boczynski",
        "user_es_contact_id": "",
        "cookies": {
            "sc": "CDA68358-94FB-4D83-9655-3FEB3C4114A3"
        }
    },
    "SearchRequest": {
        "search": "input_value",
        "isFound": 1
    }
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "search",
    "0-1": "\"Coffe\"  \nRequired  \nType: String",
    "0-2": "Value from the search string. What we are looking for on the site.",
    "1-0": "isFound",
    "1-1": "1/0  \nOptional  \nType: int",
    "1-2": "If the list is empty, it returns 0 otherwise 1"
  },
  "cols": 3,
  "rows": 2,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


## ProductUpdate

### Description

ProductUpdate is an optional event that updates product data in Yespo in real-time, regardless of the scheduled feed update. Pass product properties that need constant updating ‚Äî price, discount, availability, etc.

### Example

```json
{
  "GeneralInfo": {
    "eventName": "ProductUpdate",
    "siteId": "site_id"
  },
  "ProductUpdate": [
    {
      "brand": "Apple",
      "name": "iPhone 7",
      "description": "Some description",
      "product_id": "430738",
      "imgurl": "https://domain.com/apple/product_large.png",
      "url": "https://domain.com/apple/product_page_example.html",
      "unit_price": "201.95",
      "isInStock": "1",
      "tag_discount": ["10"],
      "tag_oldprice": ["224.38"],
      "price_currency_code": "UAH",
      "category_id": ["3"],
      "tag_something": [
        "aaa",
        "bbb"
      ]
    },
    {
      "brand": "Apple",
      "name": "iPhone 7",
      "description": "Some description",
      "product_id": "430738",
      "imgurl": "https://domain.com/apple/product_large.png",
      "unit_price": "201.95",
      "isInStock": "1",
      "tag_discount": ["10"],
      "tag_oldprice": ["224.38"],
      "price_currency_code": "UAH",
      "category": "level1 > level2 > level3",
      "category_id": ["1", "2", "3"],
      "tag_something": [
        "aaa",
        "bbb"
      ]
    }
  ]
}
```

### Parameters

[block:parameters]
{
  "data": {
    "h-0": "Name",
    "h-1": "Example",
    "h-2": "Description",
    "0-0": "ProductUpdate",
    "0-1": "Required  \nType: Object",
    "0-2": "An array of updated products and their parameters",
    "1-0": "siteId",
    "1-1": "site_id  \nRequired  \nType: String",
    "1-2": "Site name",
    "2-0": "product_id",
    "2-1": "430738  \nRequired  \nType: Int",
    "2-2": "Product ID",
    "3-0": "isInStock",
    "3-1": "1  \nRequired, can be 0 or 1  \nType: Int",
    "3-2": "‚Ä¢ Indicates if items are in stock.  \n‚Ä¢ Can have two values:  \n\"0\" ‚Äì items are out of stock;  \n\"1\" ‚Äì items are in stock.  \n‚Ä¢ If the availability has changed on the site but hasn‚Äôt changed in the feed, the sent value will be the value from the site.",
    "4-0": "unit_price",
    "4-1": "201.95  \nOptional  \nType: Int",
    "4-2": "Unit price",
    "5-0": "description",
    "5-1": "Some description  \nOptional  \nType: String",
    "5-2": "Product description",
    "6-0": "name",
    "6-1": "iPhone 7  \nOptional  \nType: String",
    "6-2": "Product name",
    "7-0": "imgurl",
    "7-1": "`https://domain.com/apple/product_large.png`  \nOptional  \nType: String",
    "7-2": "Image URL",
    "8-0": "url",
    "8-1": "`https://domain.com/apple/product_page_example.html`  \nOptional  \nType: String",
    "8-2": "Product page URL",
    "9-0": "brand",
    "9-1": "Apple  \nOptional  \nType: String",
    "9-2": "Brand name",
    "10-0": "tag_discount",
    "10-1": "10  \nOptional, should be a relative figure (%)  \nType: Int",
    "10-2": "Discount",
    "11-0": "price_currency_code",
    "11-1": "UAH  \nOptional  \nType: Int",
    "11-2": "Price currency code",
    "12-0": "tag_oldprice",
    "12-1": "224.38  \nOptional  \nType: Int",
    "12-2": "Old price"
  },
  "cols": 3,
  "rows": 13,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


If the product has a discount, you can¬†pass the next parameters:

```json
{
¬†"product_id": "1111",
¬†"unit_price": "270",
¬†"isInStock": 1,
¬†"price_currency_code": "UAH",
¬†"tag_oldprice": [
¬†¬†¬†"300"
¬†],
¬†"tag_discount": [
¬†¬†¬†"10"
¬†]
}
```

And if the¬†product **has not** a discount, than:

```json
{
 "product_id": "1111",
 "unit_price": "270",
 "isInStock": 1,
 "price_currency_code": "UAH"
}
```